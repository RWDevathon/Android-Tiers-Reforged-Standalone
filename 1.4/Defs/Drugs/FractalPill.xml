<?xml version="1.0" encoding="utf-8" ?>
<Defs>

	<ThingDef ParentName="DrugBase">
		<defName>ATR_FractalPill</defName>
		<label>Fractal pill</label>
		<description>Like all things related to archotechs, it is impossible to know what exactly this is. The only remnants of those warped by fractal power, these small pill-like objects can imbue a new host with that same fractal power. Rumor has it that archotechs whisper in the ears of those warped by it, offering a glimpse of true power. \n\nIn organics, this leads to warping of the mind and flesh - some believe it is enlightenment, others nightmares incarnate. It violently expunges diseases and mutating the very essence of its host. The vast majority of the time this will eventually lead to becoming a horrific monster, but madmen rant about the possibility for "the chosen" to "ascend to blessed fragmentation" instead.\n\nIn mechanicals, fractal warping has a much more tame effect. It integrates with the chassis and provides numerous beneficial effects ranging from enhanced cognition to ridiculous temperature tolerance. It does, however, occasionally warp internal storage and force reboots to defragment memory.</description>
		<graphicData>
			<texPath>Things/Drugs/FractalP</texPath>
			<graphicClass>Graphic_StackCount</graphicClass>
		</graphicData>
		<socialPropernessMatters>false</socialPropernessMatters>
		<rotatable>false</rotatable>
		<stackLimit>10</stackLimit>
        <useHitPoints>false</useHitPoints>
		<statBases>
			<MarketValue>1200</MarketValue>
			<Mass>0.4</Mass>
            <DeteriorationRate>0</DeteriorationRate>
            <Flammability>0</Flammability>
		</statBases>
		<techLevel>Ultra</techLevel>
		<ingestible>
			<foodType>Processed</foodType>
			<drugCategory>Medical</drugCategory>
			<ingestHoldUsesTable>false</ingestHoldUsesTable>
			<ingestCommandString>Consume {0}</ingestCommandString>
			<ingestReportString>Consuming {0}.</ingestReportString>
			<useEatingSpeedStat>false</useEatingSpeedStat>
			<outcomeDoers>
				<li Class="ATReforged.IngestionOutcomeDoer_GiveTwoHediffs">
					<hediffDef_Organic>ATR_FractalPillOrganic</hediffDef_Organic>
					<hediffDef_Mechanical>ATR_FractalPillMechanical</hediffDef_Mechanical>
					<severity>0.25</severity>
				</li> 	
			</outcomeDoers>
		</ingestible>
		<comps>
			<li Class="CompProperties_Drug">
				<listOrder>806</listOrder>
			</li>
		</comps>
	</ThingDef>

	<HediffDef>
		<defName>ATR_FractalPillOrganic</defName>
		<hediffClass>ATReforged.Hediff_Fractal</hediffClass>
		<label>Fractal Warping</label>
		<description>Fractal warping of the body. As flesh toughens and takes on metallic qualities and the mind rots and yet also grows, a uniquely enlightening and agonizing perspective takes hold. This is the archotech's work, but for what inscrutable purpose was this warping manifested?</description>
		<comps>
			<li Class="HediffCompProperties_SeverityPerDay">
				<severityPerDay>0</severityPerDay>
			</li>
            <li Class="HediffCompProperties_HealPermanentWounds" />
		</comps>
		<defaultLabelColor>(255, 130, 0)</defaultLabelColor>
		<scenarioCanAdd>true</scenarioCanAdd>
        <initialSeverity>0.25</initialSeverity>
		<maxSeverity>0.5</maxSeverity>
		<isBad>true</isBad>
		<stages>	
			<li>
				<minSeverity>0.0</minSeverity>
				<label>Transcendant</label>
				<painOffset>0.05</painOffset>
				<vomitMtbDays>16</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>8</offset>
					</li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>10</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>12</GlobalLearningFactor>
					<WorkSpeedGlobal>3</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.50</MentalBreakThreshold>
					<ArmorRating_Blunt>0.3</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.3</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.05</minSeverity>
				<label>Blessed</label>
				<painOffset>0.1</painOffset>
				<vomitMtbDays>8</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>6</offset>
					</li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>4</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>8</GlobalLearningFactor>
					<WorkSpeedGlobal>1</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.30</MentalBreakThreshold>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.15</minSeverity>
				<label>Gifted</label>
				<painOffset>0.2</painOffset>
				<vomitMtbDays>4</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>2</offset>
					</li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>4</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>2</GlobalLearningFactor>
					<WorkSpeedGlobal>0.50</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.10</MentalBreakThreshold>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.25</minSeverity>
				<label>Balanced</label>
				<painOffset>0.05</painOffset>
				<vomitMtbDays>2</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.5</offset>
					</li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>4</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.05</GlobalLearningFactor>
					<WorkSpeedGlobal>0.10</WorkSpeedGlobal>
					<MentalBreakThreshold>-0.05</MentalBreakThreshold>
					<ArmorRating_Blunt>0.05</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.05</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.35</minSeverity>
				<label>Tainted</label>
				<painOffset>0.2</painOffset>
				<vomitMtbDays>4</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>.75</offset>
					</li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>4</offset>
					</li>
				</capMods>
				<statOffsets>
					<MoveSpeed>1</MoveSpeed>
					<WorkSpeedGlobal>1.00</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.5</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.5</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.45</minSeverity>
				<label>Vile</label>
				<painOffset>0.3</painOffset>
				<vomitMtbDays>8</vomitMtbDays>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>1.5</offset>
					</li>
					<li>
						<capacity>BloodPumping</capacity>
						<offset>4</offset>
					</li>
				</capMods>
				<statOffsets>
					<MoveSpeed>2</MoveSpeed>
					<WorkSpeedGlobal>3.00</WorkSpeedGlobal>
					<ArmorRating_Blunt>1.5</ArmorRating_Blunt>
					<ArmorRating_Sharp>1.5</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.5</minSeverity>
				<label>Corrupted</label>
			</li>
		</stages>
	</HediffDef>

	<!-- HediffMechanical -->

	<HediffDef>
		<defName>ATR_FractalPillMechanical</defName>
		<hediffClass>HediffWithComps</hediffClass>
		<label>Fractal Integration</label>
		<description>Fractal integration into the whole chassis. Substantially improves all aspects of existence at the cost of the need to defragment memory occasionally. The emotional burden of being blessed with knowledge also takes its toll.</description>
		<defaultLabelColor>(0.9,0.9,1)</defaultLabelColor>
		<scenarioCanAdd>true</scenarioCanAdd>
		<maxSeverity>1.0</maxSeverity>
		<isBad>false</isBad>
		<comps>
			<li Class="HediffCompProperties_SeverityPerDay">
				<severityPerDay>0</severityPerDay>
			</li>
            <li Class="HediffCompProperties_HealPermanentWounds" />
		</comps>
		<stages>
			<li>
				<label>Little effect</label>
				<becomeVisible>false</becomeVisible>
			</li>
			<li>
				<minSeverity>0.25</minSeverity>
				<label>Awakened</label>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.2</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.2</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.25</GlobalLearningFactor>
					<WorkSpeedGlobal>0.25</WorkSpeedGlobal>
					<MentalBreakThreshold>0.04</MentalBreakThreshold>
					<ArmorRating_Blunt>0.1</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.15</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.5</minSeverity>
				<label>Illuminated</label>
				<hungerRateFactorOffset>1.25</hungerRateFactorOffset>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>0.55</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.55</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.1</offset>
					</li>
				</capMods>
				<statOffsets>
					<GlobalLearningFactor>0.5</GlobalLearningFactor>
					<WorkSpeedGlobal>0.55</WorkSpeedGlobal>
					<MentalBreakThreshold>0.08</MentalBreakThreshold>
					<ArmorRating_Blunt>0.1</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.15</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>0.7</minSeverity>
				<label>Enlightened</label>
				<hungerRateFactorOffset>2.5</hungerRateFactorOffset>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>1.5</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>1.5</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.8</offset>
					</li>
				</capMods>
				<mentalStateGivers>
					<li>
						<mentalState>WanderConfused</mentalState>
						<mtbDays>40</mtbDays>
					</li>
				</mentalStateGivers>
				<statOffsets>
					<GlobalLearningFactor>1.4</GlobalLearningFactor>
					<MentalBreakThreshold>0.12</MentalBreakThreshold>
					<WorkSpeedGlobal>1.4</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.45</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.5</ArmorRating_Sharp>
				</statOffsets>
			</li>
			<li>
				<minSeverity>1</minSeverity>
				<label>Transcendant</label>
				<hungerRateFactorOffset>4</hungerRateFactorOffset>
				<capMods>
					<li>
						<capacity>Manipulation</capacity>
						<offset>3.5</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>3.5</offset>
					</li>
					<li>
						<capacity>Consciousness</capacity>
						<offset>3</offset>
					</li>
				</capMods>
				<mentalStateGivers>
					<li>
						<mentalState>WanderConfused</mentalState>
						<mtbDays>20</mtbDays>
					</li>
				</mentalStateGivers>
				<statOffsets>
					<GlobalLearningFactor>4</GlobalLearningFactor>
					<MentalBreakThreshold>0.16</MentalBreakThreshold>
					<WorkSpeedGlobal>3.2</WorkSpeedGlobal>
					<ArmorRating_Blunt>0.6</ArmorRating_Blunt>
					<ArmorRating_Sharp>0.6</ArmorRating_Sharp>
				</statOffsets>
			</li>
		</stages>
	</HediffDef>

</Defs>
